// schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model pro_produto {
  pro_id     Int     @id @default(autoincrement())
  pro_nome   String  @db.VarChar(45)
  pro_desc   String  @db.VarChar(45)
  pro_valor  String  @db.VarChar(45)
  pro_cod    String  @db.VarChar(45)
  pro_marca  String  @db.VarChar(45)
  pro_status Boolean @db.TinyInt

  est_estoque   est_estoque[]
  ite_itemVenda ite_itemVenda[]
  pro_esp       pro_esp[]

  @@map("pro_produto")
}

model est_estoque {
  est_id   Int      @id @default(autoincrement())
  est_data DateTime
  est_qtd  Int
  pro_id   Int

  pro_produto pro_produto @relation(fields: [pro_id], references: [pro_id])

  @@map("est_estoque")
}

model ite_itemVenda {
  ite_id    Int   @id @default(autoincrement())
  ite_qtd   Int
  ite_valor Float
  pro_id    Int

  pro_produto pro_produto @relation(fields: [pro_id], references: [pro_id])
  ven_venda   ven_venda[]

  @@map("ite_itemVenda")
}

model usu_usuario {
  usu_id     Int     @id @default(autoincrement())
  usu_nome   String  @db.VarChar(45)
  usu_tel    String  @db.VarChar(45)
  usu_senha  String  @db.VarChar(45)
  usu_status Boolean @db.TinyInt

  ven_venda ven_venda[]

  @@map("usu_usuario")
}

model ven_venda {
  ven_id        Int       @id @default(autoincrement())
  ven_data      DateTime
  ven_valor     Float
  ven_status    VenStatus
  ven_pagamento String    @db.VarChar(45)
  ite_id        Int
  usu_id        Int

  ite_itemVenda ite_itemVenda @relation(fields: [ite_id], references: [ite_id])
  usu_usuario   usu_usuario   @relation(fields: [usu_id], references: [usu_id])
  cai_caixa     cai_caixa[]

  @@map("ven_venda")
}

model cai_caixa {
  cai_id      Int   @id @default(autoincrement())
  cai_entrada Float
  cai_saida   Float
  ven_id      Int

  ven_venda ven_venda @relation(fields: [ven_id], references: [ven_id])

  @@map("cai_caixa")
}

model cat_categoria {
  cat_id            Int                 @id @default(autoincrement())
  cat_nome          String              @db.VarChar(45)
  esp_especificacao esp_especificacao[]

  @@map("cat_categoria")
}

model esp_especificacao {
  esp_id   Int    @id @default(autoincrement())
  esp_nome String @db.VarChar(45)
  cat_id   Int

  cat_categoria cat_categoria @relation(fields: [cat_id], references: [cat_id])
  pro_esp       pro_esp[]

  @@map("esp_especificacao")
}

model met_metrica {
  met_id   Int       @id @default(autoincrement())
  met_nome String    @db.VarChar(45)
  pro_esp  pro_esp[]

  @@map("met_metrica")
}

model pro_esp {
  pro_id        Int
  esp_id        Int
  pro_esp_valor String @db.VarChar(45)
  met_id        Int

  pro_produto       pro_produto       @relation(fields: [pro_id], references: [pro_id])
  esp_especificacao esp_especificacao @relation(fields: [esp_id], references: [esp_id])
  met_metrica       met_metrica       @relation(fields: [met_id], references: [met_id])

  @@id([pro_id, esp_id])
  @@map("pro_esp")
}

enum VenStatus {
  CONCLUIDA
  RESERVA
  STATUS
}
